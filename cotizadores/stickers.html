<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulador de Stickers</title>
  <link rel="icon" href="siniyfavicon.png" type="image/png">
  <style>
    :root {
      --azul: #0033a0;
      --gris: #f4f4f4;
      --negro: #1a1a1a;
      --naranja: #ff6b00;
      --blanco: #ffffff;
    }

    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 1rem;
      background-color: var(--gris);
      color: var(--negro);
    }

    #auth-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: var(--gris);
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      z-index: 9999;
    }

    #auth-box {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      text-align: center;
    }

    #auth-box h2 {
      color: var(--azul);
      margin-bottom: 1rem;
    }

    #auth-box input {
      padding: 0.6rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-bottom: 1rem;
      width: 100%;
    }

    #auth-box button {
      background-color: var(--naranja);
      color: white;
      border: none;
      padding: 0.6rem 1.2rem;
      font-size: 1rem;
      cursor: pointer;
      border-radius: 6px;
    }

    #auth-error {
      color: red;
      margin-top: 1rem;
      font-weight: bold;
    }
  </style>
</head>
<body>

<div id="auth-overlay">
  <div id="auth-box">
    <h2>Acceso restringido</h2>
    <input type="password" id="clave" placeholder="Ingresa la clave">
    <br>
    <button onclick="verificarClave()">Acceder</button>
    <div id="auth-error"></div>
  </div>
</div>

<script>
  function verificarClave() {
    const input = document.getElementById("clave").value;
    const error = document.getElementById("auth-error");
    if (input === "1379") {
      document.getElementById("auth-overlay").style.display = "none";
    } else {
      error.textContent = "Clave incorrecta. Intenta nuevamente.";
    }
  }
</script>
  <h1>Simulador de Stickers</h1>

  <div class="controls">
    <div>
      <label for="ancho">Ancho (cm):</label>
      <input type="number" id="ancho" min="1" value="4" oninput="renderStickers()">
    </div>
    <div>
      <label for="alto">Alto (cm):</label>
      <input type="number" id="alto" min="1" value="4" oninput="renderStickers()">
    </div>
    <div class="qty-controls">
      <label for="cantidad">Cantidad:</label>
      <button class="btn" onclick="modificarCantidad(-1)">-</button>
      <input type="number" id="cantidad" min="1" value="100" oninput="renderStickers()">
      <button class="btn" onclick="modificarCantidad(1)">+</button>
    </div>
  </div>

  <div id="workspace" class="workspace"></div>
  <div id="info-total" class="info"></div>
  <div id="info-extra" class="info-extra"></div>

  <div class="extras-panel">
    <label for="diseno">Costo de dise√±o ($):</label>
    <input type="number" id="diseno" value="0" oninput="renderStickers()">

    <label for="envio">Costo de env√≠o ($):</label>
    <input type="number" id="envio" value="0" oninput="renderStickers()">

    <label for="ganancia">% de ganancia sobre material:</label>
    <input type="number" id="ganancia" value="0" oninput="renderStickers()">

    <div id="precio-final"></div>
  </div>

  <script>
    function modificarCantidad(delta) {
      const cantidad = document.getElementById("cantidad");
      let val = parseInt(cantidad.value);
      val = Math.max(1, val + delta);
      cantidad.value = val;
      renderStickers();
    }

    function renderStickers() {
      const ancho = parseFloat(document.getElementById("ancho").value);
      const alto = parseFloat(document.getElementById("alto").value);
      const cantidad = parseInt(document.getElementById("cantidad").value);
      const diseno = parseFloat(document.getElementById("diseno").value);
      const envio = parseFloat(document.getElementById("envio").value);
      const ganancia = parseFloat(document.getElementById("ganancia").value);

      const workspace = document.getElementById("workspace");
      const infoTotal = document.getElementById("info-total");
      const infoExtra = document.getElementById("info-extra");
      const precioFinal = document.getElementById("precio-final");

      workspace.innerHTML = "";
      infoTotal.innerHTML = "";
      infoExtra.innerHTML = "";
      precioFinal.innerHTML = "";

      const stickersPorFila = Math.floor(100 / ancho);
      const stickersPorCol = Math.floor(100 / alto);
      const totalPorPlancha = stickersPorFila * stickersPorCol;
      const planchasNecesarias = Math.ceil(cantidad / totalPorPlancha);

      let totalAreaUtilizada = 0;
      let totalAreaStickers = 0;

      for (let i = 0; i < planchasNecesarias; i++) {
        const planchaContainer = document.createElement("div");
        planchaContainer.className = "plancha-container";

        const plancha = document.createElement("div");
        plancha.className = "plancha";
        plancha.style.gridTemplateColumns = `repeat(${stickersPorFila}, 1fr)`;
        plancha.style.gridTemplateRows = `repeat(${stickersPorCol}, 1fr)`;

        const stickersEnEsta = i === planchasNecesarias - 1
          ? cantidad - (totalPorPlancha * i)
          : totalPorPlancha;

        const filasOcupadas = Math.ceil(stickersEnEsta / stickersPorFila);
        const altoUtilizado = filasOcupadas * alto;
        const anchoUtilizado = stickersPorFila * ancho;

        const guiaH = document.createElement("div");
        guiaH.className = "guia-horizontal";
        guiaH.textContent = `${anchoUtilizado} cm`;

        const guiaV = document.createElement("div");
        guiaV.className = "guia-vertical";
        guiaV.textContent = `${altoUtilizado} cm`;

        planchaContainer.appendChild(guiaH);
        planchaContainer.appendChild(guiaV);
        planchaContainer.appendChild(plancha);

        for (let j = 0; j < stickersEnEsta; j++) {
          const sticker = document.createElement("div");
          sticker.className = "sticker";
          plancha.appendChild(sticker);
        }

        totalAreaUtilizada += (anchoUtilizado * altoUtilizado) / 10000; // m¬≤
        totalAreaStickers += (stickersEnEsta * ancho * alto) / 10000;   // m¬≤
        workspace.appendChild(planchaContainer);
      }

      const costoMaterial = totalAreaUtilizada * 30000;
      const costoStickers = totalAreaStickers * 30000;
      const utilidad = (costoMaterial * ganancia) / 100;
      const totalFinal = costoMaterial + diseno + envio + utilidad;

      infoTotal.innerHTML = `√Årea utilizada: ${totalAreaUtilizada.toFixed(2)} m¬≤ | Costo total: $${costoMaterial.toFixed(0)}`;
      infoExtra.innerHTML = `√Årea total de stickers: ${totalAreaStickers.toFixed(2)} m¬≤ | Costo neto (solo stickers): $${costoStickers.toFixed(0)}`;
      precioFinal.innerHTML = `üí∞ Precio final sugerido: $${totalFinal.toFixed(0)} (incluye ganancia, dise√±o y env√≠o)`;
    }

    window.onload = renderStickers;
  </script>
</body>
</html>
